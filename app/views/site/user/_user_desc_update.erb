<script type="text/javascript">$(document).ready(function(){$(".userdesc-edit").click(function() {	$("#userdesc-form textarea").data('desc', $("#userdesc-form textarea").val());	$("#userdesc-form").show(); $("#userdesc-content").hide();})$(".userdesc-cancel").click(function() {	$("#userdesc-form textarea").val($("#userdesc-form textarea").data('desc'))	$("#userdesc-form").hide(); $("#userdesc-content").show();})});function changeUserdesc() {		var userDesc = $("#userdesc-form textarea").val();		if (userDesc.length >300){			alertWrongDesc(3);		} else {			$.post("/update_desc", {user_desc: userDesc});		}}function alertWrongDesc(status) {			var msg = $("#desc-error-msg2").html();			if (status==3) msg = $("#desc-error-msg3").html();			$('<div title="Invalid text entry" style="padding: 30px 60px; font-size: 12px;"><b>'+msg+'</b></div>').dialog({modal:true, width: 350}).dialog( "option", "buttons", {"Ok": function() { $(this).dialog("close"); } } );}function userDescChanging(status,html_desc,desc) {	if (status == 0) {		$("#userdesc-form textarea").data('desc', desc);		$(".userdesc-cancel").click();		$("#userdesc").html(html_desc).stop().css({backgroundColor: "#F0E805"}).animate({backgroundColor: "#fffff"},1200);	} else {		var msg = 'Invalid text'		if (status==3) {			alertWrongDesc(3)		} else {			alertWrongDesc(2)		}	}}</script>				<div id="userdesc-content">				<div id="userdesc">				<% if !current_user.setting.desc || current_user.setting.desc == "" %><p><i>not available</i></p><%else%><%= simple_format (current_user.setting.desc) %><%end%>				</div>				<div class="userdesc-btns"><a href="javascript:;" class="userdesc-edit">[edit]</a></div>				</div>				<div id="userdesc-form" style="display: none">				<textarea style="width: 100%" rows="3" placeholder="Maximum 300 symbols"><%= current_user.setting.desc %></textarea>				<div class="userdesc-btns"><input id="userdesc-btn" onClick="changeUserdesc()" value="Update" type="button"> &nbsp;&nbsp;<a href="javascript:;" class="userdesc-cancel">Cancel</a></div>				</div>								<span id="desc-error-msg3" style="display: none">Text is too long <br><small>(maximum 300 symbols)</small></span>				<span id="desc-error-msg2" style="display: none">Invalid text</span>