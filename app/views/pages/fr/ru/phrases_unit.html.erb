<%
#  settings 
#  
#
#
#
#
#
@cluster_num = 139
if params[:set]
	@cluster_num=params[:set]
end
@cluster = Cluster.find(@cluster_num)
@voc= @cluster.words.find(:all, :include => :cluster_words, :order => 'cluster_words.order_num')

#@mute=true
#@fs_super_txt=true

@il_lesson = @cluster.title
@il_lang = "en"
#@top_link = '<a href="/courses/beginner-course" class="su-tit-liink">Course for Beginners »</a><br>'
%>



<%
@il_lang = defined?(@il_lang) ? @il_lang : "en"
@mute = defined?(@mute) ? @mute : false
if @mute
	@il_fs_transcribe=true
else
	@il_fs_transcribe=false
end
@il_fs_stress = 0
@il_fs_html=false
@il_fs_size="small"
@il_les_name=@il_lesson
@il_page_name= @il_les_name
@il_page_desc = @il_les_name
@il_tab1 = 'Flashcards'
@il_tab1_tip = '&nbsp;'
@il_tab2 = 'Words listing'
@il_tab2_tip = '&nbsp;'
@il_tab3 = 'Test 1'
@il_tab3_tip = '&nbsp;'
@il_tab4 = 'Test 2'
@il_tab4_tip = '&nbsp;'
@il_next1 = defined?(@il_next1) ? @il_next1 : 'Next part >>'
@il_section = 'words'
@il_test_text = ''
if @il_lang == "en"
	@il_fs_stress = 1  #should be 1
	@il_fs_html=true  #should be true
	@il_tab1_name = @il_tab1;@il_tab2_name = @il_tab2; @il_tab3_name = @il_tab3;@il_tab4_name = @il_tab4
	@il_next2 = @il_next1;@il_next3 = @il_next1;@il_next4 = @il_next1
elsif @il_lang == "ru"
	@il_tab1 = 'Флэшкарты'
	@il_tab2 = 'Список'
	@il_tab3 = 'Тест 1'
	@il_tab4 = 'Тест 2'
	@il_next1 = 'Следующий этап >>'
	@il_tab1_name = @il_tab1;@il_tab2_name = @il_tab2; @il_tab3_name = @il_tab3; @il_tab4_name = @il_tab4
	@il_next2 = @il_next1;@il_next3 = @il_next1;@il_next4 = @il_next1
	@il_test_text = "texts: ['Правильно','Неправильно','Далее >>','Результат','Осталось','Всего вопросов','Правильных ответов','Результат','Показать ответ'],"
elsif @il_lang == "fr"
	@il_fs_stress = 1  #should be 1
	@il_fs_html=true  #should be true
	@il_tab1 = 'Cartes mémoire'
	@il_tab2 = 'Liste de mots'
	@il_tab3 = 'Test 1'
	@il_tab4 = 'Test 2'
	@il_next1 = 'Etape suivante >>'
	@il_tab1_name = @il_tab1;@il_tab2_name = @il_tab2; @il_tab3_name = @il_tab3; @il_tab4_name = @il_tab4
	@il_next2 = @il_next1;@il_next3 = @il_next1;@il_next4 = @il_next1
	@il_test_text = "texts: ['Correct','Incorrect','Suivant >>','Résultat','Restant','Nombre de questions','Réponses corrects','Résultat','Montrer la réponse'],"
end
%>


<% @il_fs_html=true

#@il_fs_transcribe=false
%>



<% @page_title =  @il_page_name %>
<% @page_meta = {'description' => @il_page_desc} %>
<% content_for :special_js_css do %>
<%= stylesheet_link_tag 'flash-simple' %>
<%= stylesheet_link_tag 'lexical-test-p' %>
<%= stylesheet_link_tag 'short-unit' %>
<%= javascript_include_tag 'jquery.jplayer.min.js' %>
<%= javascript_include_tag 'jp-control' %>
<%= javascript_include_tag 'lexical-test-p' %>
<%= javascript_include_tag 'flash-simple.js' %>
<%= javascript_include_tag 'short-unit' %>

<script type="text/javascript">
<%if params[:tab] %>
	openTabFromUrl(<%= params[:tab] %>);
<%else%>
	openTabFromUrl();
<%end%>
</script>

<style>
.pt-spacer {
padding-top: 0;
}
</style>
<% end %>

<div class="unit-area">
<div id="prof_tabs">
<div class="unit-title">
<%=@top_link%>
<%=@il_les_name%>

<%if @il_fs_stress%> <%= render :partial => '/site/every/settings_block' %>    <%end%>
</div>
	<div id="tabs_row">
            <div id="tab01" class="ptab current_ptab"><div><a href="#" style="color: #000;"><%=@il_tab1%></a></div></div>
			<div id="tab02" class="ptab"><div><a href="#"><%=@il_tab2%></a></div></div>
            <div id="tab03" class="ptab"><div><a href="#"><%=@il_tab3%></a></div></div>
			<div id="tab04" class="ptab"><div><a href="#"><%=@il_tab4%></a></div></div>
	</div>
	<div style="clear: both;"></div>
</div>

<div id="for_tab01" class="pBlock" style="display: block">
	<div class="inpBlock">
	
<h3 class="su-step-title"><%=@il_tab1_name%></h3>
<p class="su-step-info">
<%=@il_tab1_tip%>
</p>	



	
<div class="fs-container" id="fs1">
<%= render :partial => '/site/exercises/flash_simple', :locals => {:lang=>@il_lang} %>
</div>
<script type="text/javascript"> 
	var fs1 = new flash_show( {
		id: "fs1",
		autoplay: 1,
		<%if @mute%>sounds: 0,<%end%>
	<%unless @il_fs_transcribe%>transcribe: 0,<%end%>
		orig_size: "<%=@il_fs_size%>",
		basic_array: [
<% @last_item_index = (@voc.length)-1%>
<% @voc.each_with_index do |word,index|%>
{"origin":"<%if @il_fs_html%><%=no_js(word.html)%><%else%><%=no_js(word.text)%><%end%>",
<%if @il_transcribe_fr%>"transcript":"<%=no_js(word.transcribe_fr)%>",<%else%>"transcript":"<%=no_js(word.transcribe)%>",<%end%>
<%if @il_translate_fr%>"translate":"<%=no_js(word.translate_fr)%>",<%else%>"translate":"<%=no_js(word.translate)%>",<%end%>
"img":"<%=word.image_url%>","sound":"<%=word.sound_url%>"}<% if index!= @last_item_index %>,<%end%>
<%end%>
		]
		} )
</script>

<br><br><br><br><br><br>

<div class="es-ex-buttons su-next-wrapper">
<input type="button" class="su-next-step" value="<%=@il_next1%>" onclick="openNextStep(2)">
</div>	
	
	</div>
</div>

<div id="for_tab02" class="pBlock" style="display: none">
	<div class="inpBlock">
	
<h3 class="su-step-title"><%=@il_tab2_name%></h3>
<p class="su-step-info">
<%=@il_tab2_tip%>
</p>	



<div class="voc-wordlist">
<table class="voc_bord" align="center" cellspacing="0">
<tr>
<td>

<table style="width: 500px" class="diction" cellpadding="0" cellspacing="0" align="center">
<col width="50%"><col width="50%">
<thead>
<tr>
	<td> <div class="trans-display-wrapper"><input type="checkbox" class="trans-display" /> Transcription </div> </td>
	<td></td>
</tr>
</thead>
<tbody>
<%
@voc.each_with_index do |word, index|
-%>

<tr class="trow">
    <td class="original" valign="top">
	<%unless word.sound_url == ''%><div class="jp_control" onclick="cJplayer('<%= word.sound_url %>', this)"></div><%end%>
	<%= word.html %>
	<div class="ru-transcript">[<%= word.transcribe %>]</div>
	
    </td>
    <td class="translation" valign="top"><%= word.translate %>
    </td>
</tr>
<%end -%>
</tbody>
<tfoot>
<tr>
	<td>
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
	</td>
	<td>
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
	</td>
</tr>
</tfoot>   
</table>

</td>
</tr>
</table>
</div><!-- end of voc-wordlist-->






	
	
	
<br><br><br><br><br>		

<div class="es-ex-buttons su-next-wrapper">
<input type="button" class="su-next-step" value="<%=@il_next2%>" onclick="openNextStep(3)">
</div>
	
	</div>
</div>


<div id="for_tab03" class="pBlock" style="display: none">
	<div class="inpBlock">
	
<h3 class="su-step-title"><%=@il_tab3_name%></h3>
<p class="su-step-info">
<%=@il_tab3_tip%>
</p>	
	
<div id="ph1" class="pt-holder" style="margin-top: 0">
<%= render :partial => '/site/exercises/phrases_test', :locals => {:lang => @il_lang} %>	
</div><!-- end of pt-holder -->


<script type="text/javascript"> 
	var ph1 = new ph_exercise( {
		id: "ph1", 
		<% unless @test_data == nil || @test_data==''%>test_id: "<%= @test_data[0] %>",<%end%>
		quest_num: 15,
		variants_num: 4,
		<%=@il_test_text%>
		basic_array: [

<% @last_item_index = (@voc.length)-1 -%>
<% @voc.each_with_index  do |word, index| -%>
{"quest": "<%= no_js(word.text) %>", 
"answer": "<%= no_js(word.translate)%>"<% if current_user %>, "id":'<%= word.id%>'<%end%>}<% if index!= @last_item_index -%>,<%end%>	
<%end %>

		]
		
		} )
</script>

<div class="es-ex-buttons su-next-wrapper">
<input type="button" class="su-next-step" value="<%=@il_next3%>" onclick="openNextStep(4)">
</div>

	</div>
</div>
<div id="for_tab04" class="pBlock" style="display: none">
	<div class="inpBlock">
	
<h3 class="su-step-title"><%=@il_tab4_name%></h3>
<p class="su-step-info">
<%=@il_tab4_tip%>
</p>	
	
<div id="ph2" class="pt-holder" style="margin-top: 0">
<%= render :partial => '/site/exercises/phrases_test', :locals => {:lang => @il_lang} %>	
</div><!-- end of pt-holder -->

<script type="text/javascript"> 
	var ph2 = new ph_exercise( {
		id: "ph2", 
		<% unless @test_data == nil || @test_data==''%>test_id: "<%= @test_data[1] %>",<%end%>
		quest_num: 15,
		variants_num: 6,
		answer_type: 'type',
		rand_letters: true,
		next_time: 2000,
		<%=@il_test_text%>
		basic_array: [
<% @last_item_index = (@voc.length)-1 -%>
<% @voc.each_with_index  do |word, index| -%>

<% if @fs_super_txt %>
{"quest": "<%= no_js(word.grammar) %>", 
"correct":"<%= no_js(word.html)%>",
"forms":"<%=no_js(word.forms)%>",
"answer": "<%= no_js(word.text)%>"
<%else%>
{"quest": "<%= no_js(word.translate) %>", 
"correct":"<%= no_js(word.text)%>",
"forms":"<%=no_js(word.text)%>",
"answer": "<%= no_js(word.text)%>"
<%end%>
<% if current_user %>, "id":'<%= word.id%>'<%end%>}<% if index!= @last_item_index -%>,<%end -%>	


<%end -%>
		]
		} )
</script>	
	
<br><br><br><br>
	
	</div>
</div>

</div>


<script type="text/javascript">
currentSection="<%=@il_section%>";
</script>


